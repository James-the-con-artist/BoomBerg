{"ast":null,"code":"var _class;\nimport axios from 'axios';\nclass OpenAIChatbot {\n  constructor(apiKey) {\n    this.apiKey = void 0;\n    this.conversationArr = void 0;\n    this.apiKey = apiKey;\n    this.conversationArr = [{\n      role: 'system',\n      content: 'You are a CSGO skin price analyst'\n    }];\n  }\n  static getInstance(apiKey) {\n    if (!OpenAIChatbot.instance) {\n      OpenAIChatbot.instance = new OpenAIChatbot(apiKey);\n    }\n    return OpenAIChatbot.instance;\n  }\n  async sendMessage(userMessage) {\n    this.conversationArr.push({\n      role: 'user',\n      content: userMessage\n    });\n    const requestBody = {\n      model: \"gpt-4\",\n      // Replace with the GPT-4 model you're using\n      messages: this.conversationArr\n    };\n    try {\n      const response = await axios.post('https://api.openai.com/v1/chat/completions', requestBody, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        }\n      });\n      const aiResponse = response.data.choices[0].message.content;\n      this.conversationArr.push({\n        role: 'assistant',\n        content: aiResponse\n      });\n      return aiResponse;\n    } catch (error) {\n      console.error('Error sending message to OpenAI:', error);\n      throw error;\n    }\n  }\n}\n_class = OpenAIChatbot;\nOpenAIChatbot.instance = void 0;\nexport default OpenAIChatbot;","map":{"version":3,"names":["axios","OpenAIChatbot","constructor","apiKey","conversationArr","role","content","getInstance","instance","sendMessage","userMessage","push","requestBody","model","messages","response","post","headers","aiResponse","data","choices","message","error","console","_class"],"sources":["/Users/james/dev/miniHack-23/boomberg/src/classes/OpenAIAPI.ts"],"sourcesContent":["import axios from 'axios';\n\ntype Message = {\n    role: 'system' | 'user' | 'assistant';\n    content: string;\n};\n\nclass OpenAIChatbot {\n    private static instance: OpenAIChatbot;\n    private apiKey: string;\n    private conversationArr: Message[];\n\n    private constructor(apiKey: string) {\n        this.apiKey = apiKey;\n        this.conversationArr = [\n            {\n                role: 'system',\n                content: 'You are a CSGO skin price analyst'\n            }\n        ];\n    }\n\n    public static getInstance(apiKey: string): OpenAIChatbot {\n        if (!OpenAIChatbot.instance) {\n            OpenAIChatbot.instance = new OpenAIChatbot(apiKey);\n        }\n        return OpenAIChatbot.instance;\n    }\n\n    public async sendMessage(userMessage: string): Promise<string> {\n        this.conversationArr.push({\n            role: 'user',\n            content: userMessage\n        });\n\n        const requestBody = {\n            model: \"gpt-4\", // Replace with the GPT-4 model you're using\n            messages: this.conversationArr\n        };\n\n        try {\n            const response = await axios.post('https://api.openai.com/v1/chat/completions', requestBody, {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${this.apiKey}`\n                }\n            });\n\n            const aiResponse = response.data.choices[0].message.content;\n            this.conversationArr.push({\n                role: 'assistant',\n                content: aiResponse\n            });\n\n            return aiResponse;\n        } catch (error) {\n            console.error('Error sending message to OpenAI:', error);\n            throw error;\n        }\n    }\n}\n\nexport default OpenAIChatbot;"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAOzB,MAAMC,aAAa,CAAC;EAKRC,WAAWA,CAACC,MAAc,EAAE;IAAA,KAH5BA,MAAM;IAAA,KACNC,eAAe;IAGnB,IAAI,CAACD,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,eAAe,GAAG,CACnB;MACIC,IAAI,EAAE,QAAQ;MACdC,OAAO,EAAE;IACb,CAAC,CACJ;EACL;EAEA,OAAcC,WAAWA,CAACJ,MAAc,EAAiB;IACrD,IAAI,CAACF,aAAa,CAACO,QAAQ,EAAE;MACzBP,aAAa,CAACO,QAAQ,GAAG,IAAIP,aAAa,CAACE,MAAM,CAAC;IACtD;IACA,OAAOF,aAAa,CAACO,QAAQ;EACjC;EAEA,MAAaC,WAAWA,CAACC,WAAmB,EAAmB;IAC3D,IAAI,CAACN,eAAe,CAACO,IAAI,CAAC;MACtBN,IAAI,EAAE,MAAM;MACZC,OAAO,EAAEI;IACb,CAAC,CAAC;IAEF,MAAME,WAAW,GAAG;MAChBC,KAAK,EAAE,OAAO;MAAE;MAChBC,QAAQ,EAAE,IAAI,CAACV;IACnB,CAAC;IAED,IAAI;MACA,MAAMW,QAAQ,GAAG,MAAMf,KAAK,CAACgB,IAAI,CAAC,4CAA4C,EAAEJ,WAAW,EAAE;QACzFK,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAG,UAAS,IAAI,CAACd,MAAO;QAC3C;MACJ,CAAC,CAAC;MAEF,MAAMe,UAAU,GAAGH,QAAQ,CAACI,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO,CAACf,OAAO;MAC3D,IAAI,CAACF,eAAe,CAACO,IAAI,CAAC;QACtBN,IAAI,EAAE,WAAW;QACjBC,OAAO,EAAEY;MACb,CAAC,CAAC;MAEF,OAAOA,UAAU;IACrB,CAAC,CAAC,OAAOI,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MACxD,MAAMA,KAAK;IACf;EACJ;AACJ;AAACE,MAAA,GArDKvB,aAAa;AAAbA,aAAa,CACAO,QAAQ;AAsD3B,eAAeP,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}